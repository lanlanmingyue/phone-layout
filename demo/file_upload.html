<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"/>
    <meta name="format-detection" content="telphone=no, email=no"/>
    <meta name="apple-touch-fullscreen" content="yes"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <title>image-size</title>
    <style type="text/css">
        *{margin: 0;padding: 0;}
    </style>
    <script language="javascript">
        function fileChange(target) {
            var fileSize = 0;
            if ( !target.files) {
                var filePath = target.value;
                var fileSystem = new ActiveXObject("Scripting.FileSystemObject");
                var file = fileSystem.GetFile (filePath);
                fileSize = file.Size;
            } else {
                fileSize = target.files[0].size;
            }
            var size = fileSize / 1024;
            if(size>2000){
                alert("附件不能大于2M");
                target.value="";
                return
            }
            var name=target.value;
            var fileName = name.substring(name.lastIndexOf(".")+1).toLowerCase();
            if(fileName !="jpg" && fileName !="jpeg" && fileName !="pdf" && fileName !="png" && fileName !="dwg" && fileName !="gif" ){
                alert("请选择图片格式文件上传(jpg,png,gif,dwg,pdf,gif等)！");
                target.value="";
                return
            }
        }
    </script>
</head>
<body>
<form  action="后端接口" enctype="multipart/form-data" method="post" id="attachment_uploads">
    <div class="attachs fl">
        <div class="t_fjfont">附件:</div>
        <div class="upload_btns"><input type="file" name="file"  id="file" onchange="fileChange(this);" /> </div>
    </div>
</form>
</body>
</html>
